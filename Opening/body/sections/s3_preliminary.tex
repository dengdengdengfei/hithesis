\subsection{理论框架的前期研究}

\subsubsection{建筑空间模式表征的理论探索}

\paragraph{(1)建筑类型学的认识论困境:从西方经验到普遍问题}

前期研究首先对20世纪建筑类型学的核心文献进行了系统梳理，重点考察了从迪朗形式分类传统到罗西"集体记忆"理论的演进脉络。通过对罗西《城市建筑学》(\textit{The Architecture of the City})及穆拉托利学派相关文献的深入阅读，识别出经典类型学理论的一个核心特征：\textbf{类型的可识别性建立在形式的持久性与独特性基础之上}。

这一特征在西方纪念碑建筑传统中得到了充分验证——哥特教堂的尖拱、巴西利卡的中殿、帕拉第奥别墅的对称立面，均以鲜明的视觉特征承载类型身份。这为理解基于几何形式的建筑类型提供了有效的分析框架。

当研究视野拓展至非西方建筑传统时，前期研究通过对中国传统建筑文献的深入阅读，发现了一类具有不同表征逻辑的建筑现象：\textbf{形式呈现多样性，但类型身份保持稳定}。这类建筑的类型性主要体现为社会规则对空间配置的系统性支配，而非视觉形式的差异化特征。研究将这类建筑界定为"规则驱动型建筑"，并提出其为类型学理论开拓了新的研究空间：当形式呈现可变性时，类型的持久性通过何种机制得以维系？这为拓展罗西"记忆装置"概念的适用范围提供了新的研究对象。

\paragraph{(2)"形式驱动"与"规则驱动":两类空间生成逻辑的比较}

为回应上述问题,前期研究尝试建立一个更具包容性的分析框架。通过对不同建筑类型生成机制的比较分析,初步提出"形式驱动型建筑"与"规则驱动型建筑"的概念区分。

所谓"形式驱动型建筑",是指类型身份主要通过视觉形式的独特性来承载的建筑。这类建筑的形式生成受风格演化、结构逻辑与美学追求的主导,类型的持久性体现在形式层面,分析路径可以直接从形式推导至意义。西方教堂、纪念碑建筑是这一类型的典型代表。

所谓"规则驱动型建筑",则是指类型身份主要通过社会规则对空间配置的系统性支配来承载的建筑。这类建筑的形式生成受礼制、禁忌、等级等社会规则的主导,类型的持久性不在形式层,而在规则与形式之间的转译结构层,分析路径需要从形式回溯规则,再从规则理解意义。中国宗族建筑是这一类型的典型代表。

这一区分并非绝对的二元对立,而是一个连续谱系的两端。多数建筑同时具有形式驱动与规则驱动的双重面向,但不同建筑类型在这一谱系上的位置存在显著差异。

前期研究通过对以下案例的初步考察,验证了这一分析框架的解释力。在中国宗祠建筑中,三间两廊的基本形制与普通民居高度趋同,视觉辨识度极低,但空间配置强烈受宗法礼制支配——正堂供奉祖先神主,天井区分内外,两廊安排次要功能,轴线体现尊卑等级。形式的模糊性与规则的严格性形成鲜明对照,使其成为规则驱动型建筑的典型。在西方哥特教堂中,尖拱、飞扶壁、玫瑰窗等视觉元素具有高度独特性且跨越数百年保持稳定,类型身份直接体现为形式特征,属于形式驱动型建筑的典型。

更值得注意的是,前期研究在考察明代社会礼制运作时发现,"规则驱动"的逻辑并不仅限于建筑领域,而是传统中国社会组织的普遍特征。明代礼制通过《大明集礼》《大明会典》等典籍,系统规定了从朝廷祭祀到民间冠婚丧祭的全部仪节,形成了一套覆盖社会各阶层的行为规范体系。这套规则体系具有高度的稳定性与传承性,而其具体的物质载体——服饰、器物、空间——则可以因时因地而有变化。换言之,在传统中国社会中,"礼"作为规则系统的持久性远超其物质表达的持久性。这一社会层面的观察为"规则驱动型建筑"概念提供了更广阔的文化语境支撑:宗祠建筑的空间逻辑,正是这一普遍社会规则系统在建筑领域的具体投射。

\paragraph{(3)"规则-形式转译结构"作为分析单元的理论论证}

基于上述比较分析,前期研究进一步提出:对于规则驱动型建筑,类型分析的核心单元不应是"形式"本身,而应是"规则-形式转译结构"——即社会规则如何被编码为空间形式的稳定模式。

这一命题构成对罗西"持久性"概念的重要补充。罗西关于持久性的原初论述强调的是"形式持久,功能流变",即建筑的物质形式能够超越具体功能的变迁而保持稳定,这是他"推进性持久性"的核心含义。然而,对于规则驱动型建筑,情况恰恰相反:形式本身可能并不独特甚至相当灵活,真正持久的是社会规则转译为空间形式的生成逻辑。广府宗祠的平面形制与普通民居难以区分,但"昭穆制度决定神主排列""祭祀程序编排仪式动线"这些转译规则却跨越数百年保持稳定。因此,前期研究提出补充命题:对于规则驱动型建筑,转译结构持久,形式可变。

这一命题同时为罗西"记忆装置"的隐喻提供了操作化路径。罗西将建筑比作记忆装置,但这一比喻始终停留在隐喻层面,缺乏具体的分析手段。前期研究尝试将其操作化为:建筑是"规则的编码装置"。所谓编码,是指社会规则通过特定的空间手段被物质化的过程。通过对中国宗祠、书院、庙宇等礼制建筑文献的考察,前期研究初步归纳了三种核心编码机制:其一,等级规则编码为轴线位置,尊者居中、卑者居侧;其二,禁忌规则编码为边界设置,内外有别;其三,仪式规则编码为动线编排,进退有序、行止有节。这三种编码机制在不同地区、不同时代的礼制建筑中反复出现,显示出较强的跨案例稳定性,为"规则驱动型建筑"概念的提出奠定了经验基础。

\subsubsection{多模态分析框架的方法论整合}

\paragraph{(1)既有方法的适用性评估}

前期研究对可能用于建筑空间模式分析的既有方法进行了系统评估。

符号学方法为理解建筑意义生成提供了另一条路径。皮尔斯符号学的符号-对象-解释项三元关系框架尤其适用于规则驱动型建筑分析:空间元素是符号,礼制规则是对象,使用者的理解是解释项。这一框架有效地将"形式"与"规则"置于统一的分析视野中,为"编码-解码"分析路径提供了理论支撑。前期研究发现,符号学视角能够很好地解释为何广府宗祠在视觉上与民居相似,却能被当地居民准确识别——识别的依据不是形式特征,而是对编码规则的文化理解。

基于知识图谱的多跳推理技术作为知识表征与推理的手段,为"规则-形式转译结构"的形式化表达提供了可能。CIDOC CRM是文化遗产领域的国际本体标准,其"事件中心"建模范式强调行为、时间与物质载体的关联,与规则驱动型建筑的"行为-空间"关联分析具有良好的契合度。前期研究认为,通过设计领域本体扩展,可以将礼制规则、宗族角色、仪式行为与空间单元纳入统一的知识表征框架。

\paragraph{(2)方法整合的理论框架}

基于上述评估,前期研究提出了整合符号学、空间句法与知识图谱的方法论框架:

\begin{figure}[htbp]
    \centering
    \begin{tikzpicture}[
        % 全局样式定义
        node distance = 2cm, 
        block/.style = {
            align=center, 
            font=\sffamily\small,
            inner sep=6pt,
            % 如果需要边框，取消下面一行的注释
            % draw=black, thick 
        },
        arrow/.style = {
            ->, 
            >=Stealth, 
            thick, 
            draw=black
        },
        line/.style = {
            thick, 
            draw=black
        }
    ]

        % --- 第一层 ---
        \node [block] (top) {理论层：类型学分析框架 $\rightarrow$ 规则驱动型建筑分析框架};

        % --- 定义第二层的基准高度 (分叉点) ---
        % 我们先在第一层下方 1cm 处设一个分叉点
        \coordinate (fork_top) at ([yshift=-1cm]top.south);
        
        % --- 第二层 ---
        % 节点现在定位在分叉点下方再往左右偏 4cm 的位置，anchor=north 确保它们顶部对齐
        \node [block, below left=1cm and 0.5cm of fork_top, xshift=-3.5cm, anchor=north] (left1) {形式驱动分析\\（符号学视角）};
        \node [block, below right=1cm and 0.5cm of fork_top, xshift=3.5cm, anchor=north] (right1) {规则驱动分析\\（人类学视角）};

        % --- 第三层 ---
        % 增加垂直间距到 2.2cm
        \node [block, below=2.2cm of left1] (left2) {视觉识别与量化\\（语义分割 + 量化空间分析）};
        \node [block, below=2.2cm of right1] (right2) {规则抽取与形式化\\（文献诠释 + 知识图谱 + 质性空间分析）};

        % --- 第四层 ---
        % 放在整张图的中轴线上
        \node [block, below=7.5cm of top.south] (bottom1) {多模态 AI 整合\\（跨模态语义关联与推理）};

        % --- 第五层 ---
        \node [block, below=1.2cm of bottom1] (bottom2) {知识发现与验证};

        % ================= 连线逻辑 (修复箭头逻辑) =================

        % 1. 修复：第一层到第二层的“门型”分叉箭头
        \draw [line] (top.south) -- (fork_top); % 垂直向下
        \draw [line] (left1.north |- fork_top) -- (right1.north |- fork_top); % 水平横跨
        \draw [arrow] (left1.north |- fork_top) -- (left1.north); % 垂直向下指左节点
        \draw [arrow] (right1.north |- fork_top) -- (right1.north); % 垂直向下指右节点

        % 2. 第二层到第三层的垂直箭头
        \draw [arrow] (left1) -- (left2);
        \draw [arrow] (right1) -- (right2);

        % 3. 第三层到第四层的汇聚箭头 (指向多模态AI整合)
        \draw [arrow] (left2.south) -- (bottom1.north);
        \draw [arrow] (right2.south) -- (bottom1.north);

        % 4. 第四层到第五层
        \draw [arrow] (bottom1) -- (bottom2);

    \end{tikzpicture}
    \caption{整合方法论框架}
    \label{fig:framework}
\end{figure}

这一框架的理论逻辑可以从三个层面来理解。在理论层，类型学分析框架提供了"类型作为集体记忆载体"的基本框架，而规则驱动型建筑分析框架则补充了其对形式模糊型建筑的解释力，两者共同构成研究的理论基础。在方法层，框架建立了"形式驱动-规则驱动"双轨分析路径：形式驱动分析基于符号学视角，通过视觉识别与量化（语义分割+复化空间分析），回答"建筑呈现为何种形式"的问题；规则驱动分析基于人类学视角，通过规则抽取与形式化（文献诠释+知识图谱+质性空间分析），回答"形式为何如此配置"的问题。在整合层，多模态AI整合技术作为技术中介，实现跨模态语义关联与推理，最终支撑知识发现与验证。

这一框架的核心创新在于打通了"描述"与"解释"之间的方法鸿沟。传统的建筑形态研究擅长描述建筑"是什么样"，但难以解释"为什么是这样"；传统的礼制研究擅长解释规则的文化意义，但难以量化其空间表达。双轨分析路径使两类研究能够相互验证、相互补充：形式驱动分析发现的空间模式，可以通过规则驱动分析获得文化与礼制层面的解释；规则驱动分析抽取的礼制逻辑，可以通过形式驱动分析获得空间形态层面的验证。











\paragraph{(3)关键技术路径的初步论证}

前期研究对框架涉及的关键技术路径进行了可行性论证,确认了技术实现的基本可能性。

在视觉-语义关联方面,研究拟通过深度学习语义分割技术从建筑图像中识别空间元素,并建立与知识图谱实体的映射关系。前期文献调研表明,基于卷积神经网络与Transformer架构的语义分割模型在建筑图像分析中已有成功应用,能够有效识别建筑构件与空间区域,技术成熟度较高。针对岭南传统建筑的特殊性,需要设计专门的分割类别体系,并进行针对性的模型微调,但这属于工程实现层面的问题,不存在原理性障碍。

在文本-知识抽取方面,研究拟利用大语言模型从礼制文献中抽取结构化知识,并转化为知识图谱的实体与关系。前期小规模实验表明,大语言模型对古汉语文献具有一定的理解能力,能够识别族谱、方志中的人物关系、仪式程序与空间描述。但由于礼制知识的专业性与文献表达的复杂性,完全自动化的抽取尚难以保证准确率,需要建立"模型初抽取+专家校验"的混合工作流程。这一方案在技术上可行,但需要投入较多的人工校验成本。

在图谱-推理整合方面,研究拟基于检索增强生成技术实现知识图谱与大语言模型的整合,支持面向规则的语义推理与知识发现。前期原型开发验证了这一技术路径的可行性:通过将知识图谱中的三元组转化为大语言模型可理解的上下文,模型能够回答诸如"按照昭穆制度,某人的神主应置于何位"之类的推理问题,并能够溯源推理路径。这一能力对于验证"规则-形式转译结构"的解释力具有重要价值。



%=======================================


%3.2 视觉框架 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

%=======================================

\subsection{语义分割模型的初步实验}

\subsubsection{实验背景与目的}

为验证深度学习技术在广府宗祠建筑视觉元素自动识别中的可行性，本研究开展了基于语义分割的初步实验。广府宗祠建筑包含丰富的符号学信息，这些信息分布于不同媒介载体之中：文本类符号（匾额、楹联、神主牌、碑刻）承载着家族历史与儒家伦理；图像类符号（木雕、石雕、砖雕、彩画）编码了吉祥寓意与社会等级；结构类元素（梁架、柱础、屋顶、墙体）则体现了礼制空间的物质化表达。实现对这些多模态元素的精确识别与分割，是构建"形式-规则"双轨分析框架的技术前提。

\subsubsection{数据集构建}

实验数据来源于珠江三角洲地区（广州、佛山、中山、东莞等地）的广府宗祠田野调查。通过系统性实地拍摄与数字档案整理，收集了399张高分辨率建筑影像作为原始数据集。基于皮尔斯符号学理论对建筑元素的媒介属性分类，建立了11个语义类别的标注体系：背景（Background）、柱（Column）、门（Door）、山墙（Gable Wall）、匾额（Plaque）、正脊（Ridge）、屋顶（Roof）、垂脊（Side Ridge）、异形斗拱（Special-shaped Dougong）、台基（Stylobate）、墙体（Wall）、下栱梁（Xiagong Beam）。

为增强模型的泛化能力，采用了数据增强策略：对原始图像实施水平翻转（概率30\%）、随机旋转$\pm$5°（概率30\%）、随机裁剪至80-100\%比例（概率20\%）以及色彩抖动（概率30\%，亮度/对比度/饱和度调整范围$\pm$10\%）。经增强后，数据集规模扩展至1100个样本，按照5:3:2的比例划分为训练集（550样本）、测试集（330样本）与验证集（220样本）。这一划分策略确保了模型训练的充分性与评估的可靠性。

\subsubsection{实验设置与模型选择}

实验采用多种主流语义分割架构进行对比验证，以全面评估不同技术路径在广府宗祠建筑元素识别任务中的表现。选择的基线模型包括：

\begin{enumerate}[label=(\arabic*)]
    \item \textbf{UNet}：经典的编码器-解码器架构，采用ResNet34作为骨干网络，在ImageNet上预训练以利用迁移学习；
    \item \textbf{DeepLabV3}：基于空洞卷积（Atrous Convolution）的语义分割模型，适用于多尺度特征提取；
    \item \textbf{FPN (Feature Pyramid Network)}：特征金字塔网络，通过自顶向下路径与横向连接融合多尺度特征；
    \item \textbf{HRNet}：高分辨率网络，保持高分辨率表征贯穿全网络；
    \item \textbf{SegFormer}：基于Transformer架构的高效分割模型；
    \item \textbf{Mask2Former}：通用图像分割框架，采用masked-attention机制。
\end{enumerate}

在此基础上，实验还测试了整合双路径结构与小波变换卷积机制的DualPath-WavNet\_Canton (DP-WN\_C)模型，该架构专门针对广府宗祠建筑的多尺度特征与精细装饰细节进行了优化设计。

所有实验均在统一硬件环境下进行（NVIDIA GeForce RTX 4090D GPU，Intel Core i7-10700K CPU，1TB内存，Linux 22.04系统）。训练参数设置为：初始学习率0.001，动量因子0.100，权重衰减0.0001，输入图像统一调整至256$\times$256分辨率。为确保结果的统计显著性，每个模型独立训练10次（采用不同随机种子），最终性能指标取平均值报告。

\subsubsection{实验结果}

初步实验的性能评估采用了分类准确性指标（Precision, Recall, F1 Score）与空间分割质量指标（Overall Accuracy, Mean IoU, Mean Accuracy）相结合的综合评价体系。表1展示了各模型在测试集上的整体性能表现。

\begin{table}[htbp]
\centering
\caption{语义分割模型整体性能对比}
\label{tab:model_performance}
\begin{tabular}{lcccccc}
\hline
模型 & Precision & Recall & F1 Score & Overall & Mean IoU & Mean \\
     & (avg) & (avg) & (avg) & Accuracy &  & Accuracy \\
\hline
DP-WN\_C & 0.9093 & 0.8380 & 0.8722 & 0.8915 & 0.7344 & 0.8429 \\
HRNet & 0.8535 & 0.8013 & 0.8266 & 0.8709 & 0.6841 & 0.7775 \\
UNet & 0.8487 & 0.7967 & 0.8219 & 0.8660 & 0.6332 & 0.7496 \\
FPN & 0.8454 & 0.7936 & 0.8187 & 0.8626 & 0.6538 & 0.7582 \\
SegFormer & 0.8429 & 0.7913 & 0.8163 & 0.8601 & 0.6738 & 0.7670 \\
DeepLabV3 & 0.8225 & 0.7722 & 0.7966 & 0.8393 & 0.5690 & 0.7042 \\
Mask2Former & 0.7719 & 0.7746 & 0.7475 & 0.7876 & 0.6380 & 0.7128 \\
\hline
\end{tabular}
\end{table}

从分类性能角度观察，DP-WN\_C模型在精确率（90.93\%）、召回率（83.80\%）与F1分数（87.22\%）三项指标上均显著优于基线模型。相比表现次优的HRNet，DP-WN\_C在F1分数上提升了5.5个百分点，这一改进对于文化遗产记录具有实质意义——更高的召回率意味着更少的建筑要素遗漏，而更高的精确率则减少了误识别导致的错误标注。

在空间分割质量方面，DP-WN\_C的Mean IoU达到73.44\%，相比HRNet提升7.4\%，相比SegFormer提升9.0\%。IoU（Intersection over Union）指标直接反映预测分割掩码与真实标注的重合度，该指标的显著提升表明模型能够更精确地勾勒建筑元素的边界轮廓。这对于需要精细测绘的建筑遗产文档化工作尤为关键，因为元素的空间位置与比例关系本身就承载着礼制逻辑的信息。

\subsubsection{类别级性能分析}

进一步的类别级分析揭示了不同建筑元素的识别难度差异。结构性主导元素（如屋顶、墙体、台基）普遍获得较高识别准确率（召回率85\%以上），这些元素具有明确的几何边界与较大的空间占比。相比之下，装饰性细部元素呈现出更大的识别挑战：匾额的召回率为68\%，异形斗拱为87\%，这反映了小尺度、高复杂度装饰构件在视觉识别上的固有难度。

值得注意的是，文本类符号（匾额）与特定图像类符号（异形斗拱）的识别准确率相对偏低，恰恰揭示了传统建筑符号学分析的一个关键问题：最具文化意义的符号往往以最精细的形式呈现。匾额承载着家族功名与道德训诫，异形斗拱则是工艺水平与经济实力的标志，但这些元素的小尺度特征与复杂纹样使其成为计算机视觉的"硬骨头"。这一发现为后续研究指明了技术攻关方向——需要发展专门针对小目标、高细节装饰元素的特征提取机制。

\subsubsection{可行性验证与技术局限}

初步实验验证了深度学习语义分割技术应用于广府宗祠建筑元素自动识别的可行性。DP-WN\_C模型在多数评价指标上达到了实用化的精度水平（Overall Accuracy 89.15\%, Mean IoU 73.44\%），能够为建筑遗产的批量化、标准化记录提供技术支撑。模型对11个语义类别的有效区分能力，为后续构建基于CIDOC CRM标准的知识图谱奠定了数据基础——精确的视觉元素分割是实现"形式$\rightarrow$符号$\rightarrow$意义"多层级映射的第一步。

然而，实验同时暴露了当前技术路径的局限性。首先，模型对精细装饰元素（匾额68\%召回率、山墙69\%召回率）的识别性能仍有待提升，这些元素恰恰是符号学分析的核心对象。其次，混淆矩阵分析显示，空间邻近或材质相似的元素之间存在误识别现象（如匾额被误判为墙体的比例达24\%），这反映了模型在理解建筑元素上下文关系方面的不足。第三，现有模型仅能完成视觉层面的"形式识别"，缺乏对符号文化意义的解释能力——例如，模型能够分割出"异形斗拱"的像素区域，但无法判断其所代表的建筑等级或工艺传统。

这些技术局限为后续研究指明了三个改进方向：
\begin{enumerate}[label=(\arabic*)]
    \item 发展针对小尺度装饰元素的多尺度特征提取与注意力机制；
    \item 整合空间句法与知识图谱，建立元素间的拓扑与语义关联，提升模型的上下文理解能力；
    \item 将视觉分割与大语言模型结合，实现从"形式识别"到"意义解释"的跨越，真正构建起罗西类型学意义上的"记忆装置"计算模型。
\end{enumerate}

初步实验的成功为本研究的整体技术路线提供了实证支持，证明了"形式驱动的人工智能分析框架"的可行性，并为下一步开发"规则驱动的人工智能分析框架"奠定了基础。



%=======================================


%3.2.3知识图谱 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

%=======================================

\subsection{知识图谱构建的初步尝试}

为验证基于知识图谱技术表征岭南传统建筑礼制知识的可行性，在前期开展了小规模的本体设计与知识图谱构建实验。实验以广府宗祠为对象，重点探索了CIDOC CRM框架在建筑礼制知识建模中的适用性，并初步验证了礼制规则形式化表达的技术路径。

\subsubsection{本体设计与复用}

参考文化遗产领域的成熟实践，实验选择CIDOC CRM作为本体构建的基础框架。CIDOC CRM（ISO 21127）是国际博物馆文献委员会制定的文化遗产信息概念参考模型，提供了描述文化遗产对象、事件、时空信息及其关系的标准化类与属性体系。针对中国传统建筑的特殊性，本体设计工作分为三个层次展开：

\begin{enumerate}[label=(\arabic*)]
    \item 进行核心类的映射与复用。将广府宗祠及其构成要素映射到CIDOC CRM的E24\_Physical\_Human-Made\_Thing类，建筑活动（营建、修缮等）映射到E7\_Activity类，礼制事件（祭祀、聚会等）映射到E5\_Event类，空间位置映射到E53\_Place类，时间信息映射到E52\_Time-Span类。这一映射工作确保了知识表达与国际标准的语义兼容性。
    
    \item 针对建筑空间特征进行本体扩展。CIDOC CRM对物理空间的描述相对抽象，难以精确表达中国传统建筑的空间等级、轴线关系、边界禁忌等礼制性特征。因此，通过OWL（Web Ontology Language）语言扩展定义了EX\_Spatial\_Unit（空间单元）、EX\_Axis（轴线）、EX\_Boundary（边界）等子类，并引入P\_has\_hierarchy\_level（具有等级层次）、P\_aligned\_with（对齐于）、P\_restricted\_by（受限于）等属性，用于刻画空间的礼制属性。
    
    \item 构建礼制规则本体。礼制规则是广府宗祠空间生成的内在逻辑，其形式化表达是本研究的关键挑战。实验设计了Rule类作为顶层概念，下设Hierarchy\_Rule（等级规则）、Taboo\_Rule（禁忌规则）、Ritual\_Rule（仪式规则）等子类。每条规则通过Rule\_Subject（规则主体）、Rule\_Condition（触发条件）、Rule\_Consequence（空间结果）三元组进行结构化描述。例如，"宗祠正厅神主牌位按昭穆制度左右分列"这一礼制规则被表达为：
\end{enumerate}

\begin{verbatim}
Rule_001 rdf:type Hierarchy_Rule ;
  Rule_Subject "正厅神主牌位" ;
  Rule_Condition "昭穆世系关系" ;
  Rule_Consequence "空间左右排列秩序" ;
  Ritual_Principle "昭居左，穆居右" ;
  Applicable_Space "正厅中央位置" .
\end{verbatim}

\subsubsection{数据源的分层管理策略}

在知识抽取过程中，面临的一个核心问题是数据来源的异质性与可信度差异。广府宗祠的相关信息散见于多种文献与调查资料中，其权威性与可靠性存在显著差异。基于此，实验建立了数据源的三层分级体系：

\begin{enumerate}[label=(\arabic*)]
    \item \textbf{权威官方文献}。包括国家文物局发布的文物保护图鉴、省级文物普查档案、博物馆馆藏建筑测绘图纸等官方出版物。这类数据经过严格的学术审查与实地核验，信息准确性最高。实验中此类数据占比约35\%，主要涵盖建筑的基本信息（名称、朝代、位置、保护级别）、精确尺寸及重要构件的形制描述。
    
    \item \textbf{学术研究文献}。包括建筑史学者（如陆元鼎、程建军）、人类学家（如科大卫David Faure、陈志森）及历史学家（如冯江）的专著与论文。这类文献基于田野调查与文献考证，对宗祠的礼制背景、空间逻辑及社会功能有深入阐释，可信度较高。实验中此类数据占比约45\%，主要贡献了礼制规则的解释性知识与跨案例的比较分析结论。
    
    \item \textbf{地方文献与民间资料}。包括县志、乡志、族谱、碑刻拓片及村民口述资料。这类数据往往包含丰富的地方性知识与历史细节，但未经充分学术验证，可能存在记载错误、时间混淆或主观色彩。实验中此类数据占比约20\%，主要用于补充特定宗祠的建造过程、修缮历史及地方仪式习俗。
\end{enumerate}

针对这一分层体系，知识图谱构建采用了差异化的处理策略。每个三元组在存储时附加Provenance（来源）与Confidence（置信度）元数据属性。来源属性记录数据的具体出处（文献名称、页码、采集时间），置信度属性根据来源层级赋予0-1之间的数值（第一层0.9-1.0，第二层0.7-0.9，第三层0.4-0.7）。这一设计使得后续应用可以根据需求选择性使用不同置信度的知识。

在推理机制上，系统支持两种模式：\textbf{分层推理}与\textbf{融合推理}。分层推理模式下，针对特定查询，系统优先使用高置信度数据进行推理，仅在信息不足时降级调用低置信度数据，确保推理结果的可靠性。融合推理模式下，系统综合考虑所有来源的数据，通过证据融合算法（如Dempster-Shafer理论）计算推理结论的综合置信度，适用于需要全面覆盖但允许一定不确定性的场景。

\subsubsection{小规模数据的知识抽取}

实验选取了广州、佛山地区10座典型广府宗祠作为数据样本，覆盖了不同规模、不同宗族类型与不同时期的案例。数据来源包括测绘图纸、田野调查照片、族谱文献及地方志资料。知识抽取工作分为结构化数据提取和非结构化文本处理两个方面。

对于测绘图纸等结构化数据，通过人工标注方式提取了建筑的基本信息（名称、朝代、位置、尺寸）、空间结构信息（进深、开间、轴线关系）及构件信息（梁架、柱网、装饰）。这部分工作建立了包含120个建筑实体、380个空间单元实体及约1500个属性三元组的初步数据集。数据来源以第一层官方文献为主，部分补充自第二层学术测绘成果。

对于族谱、方志等非结构化文本，实验借鉴命名实体识别技术，采用基于规则与字典相结合的方法抽取礼制相关信息。首先，构建了包含礼制术语（如"昭穆"、"祧祀"、"宗子法"）、空间术语（如"寝堂"、"享堂"、"两廊"）及身份术语（如"族长"、"房长"、"阄分"）的领域词典。然后，设计了一套基于上下文模式的规则，用于识别文本中描述礼制规则的段落。例如，识别"X之位次在Y之Z"、"祭祀时X居于Y"等模式，并将其转换为结构化的礼制规则表达。通过这一方法，从不同层级文献中抽取了58条礼制规则，涵盖了空间等级、祭祀秩序、仪式动线等方面。其中，第二层学术文献贡献了35条规则（置信度0.75-0.85），第三层地方文献贡献了23条规则（置信度0.45-0.65）。

\subsubsection{图谱构建与映射}

在完成本体设计与知识抽取后，利用Apache Jena框架搭建了RDF三元组存储与查询环境。数据映射工作采用人工定义映射规则的方式完成，将提取的结构化数据按照设计的本体模式转换为RDF格式。映射过程中遵循以下原则：

\begin{enumerate}[label=(\arabic*)]
    \item URI命名规范化。为每个实体分配唯一的URI标识，采用命名空间前缀区分不同类型资源（如gs:用于宗祠实体，rule:用于礼制规则）。
    
    \item 属性值标准化。对于尺寸、方位等属性，统一采用标准单位与表达方式；对于文本描述，进行繁简转换与异体字规范化处理。
    
    \item 关系显式化。对于隐含在文本中的空间关系、等级关系、时序关系，通过显式属性进行表达，确保知识的可推理性。
    
    \item 来源追溯性。每个三元组附加dc:source（来源）与prov:confidence（置信度）属性，记录知识的出处与可靠程度，支持后续的数据质量管理与推理控制。
\end{enumerate}

最终构建的初步知识图谱包含10个宗祠实例，1823个实体节点，4267个关系三元组。图谱覆盖了建筑基本信息、空间结构、礼制规则、历史沿革等维度，初步实现了"建筑实体-空间结构-礼制规则"的关联表达。

\subsubsection{礼制规则形式化的可行性验证}

为验证礼制规则形式化表达的有效性，实验设计了三个验证任务：规则一致性检验、规则推理验证与分层推理对比。

\begin{enumerate}[label=(\arabic*)]
    \item \textbf{规则一致性检验}旨在评估抽取的礼制规则是否在逻辑上自洽。通过SPARQL查询语句检索图谱中的冲突性规则，例如，是否存在某空间既被标记为"正中轴线位置"又被标记为"偏侧附属空间"的矛盾情况。检验结果显示，58条规则中存在5处冲突，经人工审查发现，其中3处为第三层地方文献记载的歧义性表述，2处为不同时期礼制变迁导致的规则差异。修正后，将时期信息作为规则的适用条件加入，使规则集在各自适用语境下达到了逻辑一致性。
    
    \item \textbf{规则推理验证}测试知识图谱对空间使用规则的推理能力。实验基于已知的礼制规则，利用SPARQL推理引擎推断祭祀仪式中的空间安排。例如，给定输入"某房长在春祭仪式中的站位"，系统能够基于"房长按房系次序排列于享堂两侧"这一等级规则，结合该宗祠的房系谱系信息，推理出具体的站位区域。对25个测试用例的推理准确率达到88\%，初步验证了规则表达的可计算性。
    
    \item \textbf{分层推理对比}实验则评估了数据源分层管理的有效性。选取5个查询任务，分别采用"仅使用第一层数据"、"使用第一二层数据"及"使用全部三层数据"三种模式进行推理，比较推理的覆盖率与准确率。结果显示，仅使用第一层数据时，覆盖率为52\%但准确率高达96\%；使用第一二层数据时，覆盖率提升至78\%，准确率为91\%；使用全部数据时，覆盖率达到95\%，但准确率下降至85\%。这一结果验证了分层管理策略的合理性：对于需要高可靠性的应用场景，可选择性使用高层级数据；对于需要全面信息的研究场景，可融合使用多层级数据并标注置信度。
\end{enumerate}


实验结果表明，基于CIDOC CRM框架构建岭南传统建筑知识图谱在技术上是可行的。图谱能够有效整合多源异构数据，实现建筑实体、空间结构与礼制规则的关联表达。数据源分层管理策略有效平衡了知识覆盖的全面性与可靠性，为后续大规模知识库构建中的数据质量控制提供了可行方案。礼制规则的形式化表达初步验证了"规则-形式"转译关系的可计算性，为后续自动化推理与知识发现奠定了方法基础。

然而，实验也暴露了若干有待改进的问题。首先，知识抽取高度依赖人工标注，效率较低且难以规模化，尤其是对于第三层地方文献的处理，需要引入自然语言处理与大语言模型技术提升自动化水平。其次，礼制规则的自然语言描述存在歧义性，不同来源对同一礼制现象的表述可能存在细微差异，如何准确解析并转换为形式化表达仍需进一步探索。第三，当前图谱规模较小，对复杂空间关系与隐性礼制知识的表达能力有限，需要引入更先进的知识表示与推理技术。最后，数据源置信度的量化赋值目前依赖专家经验，缺乏系统化的评估标准，后续需要建立基于多维证据的置信度计算模型。这些问题将在后续研究中通过深度学习、自然语言处理、语义推理及众包验证等技术手段逐步解决。



%=======================================


%3.4 基于知识增强技术(RAG)的原型开发~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

%=======================================

% 请在导言区确保已加载：\usepackage{enumitem}

\subsection{基于知识图谱与多模态大语言模型的分析系统原型开发}

为探索人工智能在建筑遗产多模态数据挖掘与语义推理中的应用潜力，前期构建了集成知识图谱（Knowledge Graph）与多模态大语言模型（Multimodal Large Language Model, MLLM）的分析原型系统。该系统旨在整合前述构建的结构化礼制知识与建筑遗产的视觉数据，实现对广府宗祠“形式—意义”关联的跨模态查询与解释。



原型系统采用了“多模态检索增强生成”的架构，具体工作流程包括：
\begin{enumerate}[label=(\arabic*)]
    \item \textbf{多模态输入处理}：系统支持用户输入自然语言问题及建筑图像。通过视觉编码器提取图像特征，并利用文本嵌入技术解析语义意图。
    \item \textbf{知识图谱关联检索}：根据识别出的建筑构件（如“异形斗拱”）或空间实体，通过 SPARQL 查询从知识图谱中检索关联的礼制规则、社会等级及宗族背景。
    \item \textbf{跨模态上下文融合}：将检索到的结构化知识（符号化）与图像特征（像素化）进行语义对齐，构建包含视觉事实与规则约束的增强型 Prompt 上下文。
    \item \textbf{多模态语义推理}：调用多模态大语言模型（如 GPT-4o 或 Claude 3.5 Sonnet）基于融合后的上下文生成回答。系统不仅能回答事实性问题，还能通过“视觉—知识”联合推理，解释诸如“图像中的梁架装饰如何体现该家族的社会地位？”等复杂语义问题。
\end{enumerate}

此外，原型系统还实现了基于数据源分层的可信度标注机制。在生成回答时，系统会自动标注所引用知识的来源层级（官方文献、学术著作或地方资料）及置信度，使用户能够评估答案的可靠性。这一设计延续了 3.2.2 节中知识图谱分层管理的理念，确保了多模态知识应用过程中的可追溯性。

目前，原型系统已完成跨模态对接的技术框架搭建，初步验证了知识图谱与多模态大语言模型整合在解释“规则驱动型建筑”逻辑上的有效性。通过这一原型的开发，为博士论文中规划的“形式驱动与规则驱动双轨整合分析”研究积累了关键的技术经验。